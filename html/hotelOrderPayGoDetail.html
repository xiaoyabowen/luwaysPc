<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>路途-专注于境外目的地产品</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <!--[if lte IE 9]>
    <script src="https://cdn.bootcss.com/html5shiv/3.6/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.js"></script>
    <![endif]-->

    <!--[if lte IE 8]>
    <div class="text-xs-center m-b-0 bg-blue-grey-100 alert">
        <button type="button" class="close" aria-label="Close" data-dismiss="alert">
            <span aria-hidden="true">×</span>
        </button>
        你正在使用一个 <strong>过时</strong> 的浏览器。请 <a href=https://browsehappy.com/ target=_blank style="color:#FF9600;">升级您的浏览器</a>，以提高您的体验。
    </div>
    <![endif]-->
    <!--网页logo-->
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <link rel="stylesheet" type="text/css" href="../css/hotel.css"/>
    <script src="../js/jquery-1.9.1.min.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>



<div class="hotelPayTab cssFlex">
    <li class="hotelPayTabActive">
        <span class="hotelPayTabNum">1</span>
        <p class="hotelPayTabFont">1.填写订单</p>
    </li>
    <li>
        <span class="hotelPayTabNum">2</span>
        <p class="hotelPayTabFont">2.在线支付</span>
    </li>
    <li>
        <span class="hotelPayTabNum">3</span>
        <p class="hotelPayTabFont">3.完成预定</p>
    </li>
</div>

<!--2.订单详情步骤信息-->
<div class="hotelPayOrderInfo headerSubCommon cssFlex">
    <!--预定的酒店详情-->
    <div class="hotelPayOrderInfoImg" style="height: 560px;">
        <img src="" class="hotelPayInfoImgImg" alt="已预定酒店信息"/>
        <h4 class="hotelPayInfoImgH4"></h4>
        <p style="margin-bottom: 12px; padding-left: 20px" class="hotelPayInfoImgStar">星级：

        </p>
        <p class="hotelPayInfoImgTitle" style=" padding-left: 20px"></p>
        <p class="hotelShowAllMapHotPrice" style=" padding-left: 20px">价格：<span class="hotelPayInfoImgPrice"></span></p>
    </div>
    <!--填写个人信息表-->
    <div class="hotelPayInfoUser">
        <h4>产品信息</h4>
        <div class="hotelPayInfoUserContent">
            <p>房型信息：<span class="hotelPayInfoUserRoom"></span></p>
            <p>入住时间：<span class="hotelPayInfoUserIn"></span></p>
            <p>退房时间：<span class="hotelPayInfoUserOut"></span></p>
            <p>房间数量：<span class="hotelPayHome"><i class="hotelPayInfoUserNum"></i>间 (成人 <i class="hotelPayInfoUserAdult"></i>位&nbsp;&nbsp;儿童 <i class="hotelPayInfoUserChild"></i>位)</span></p>
        </div>
        <h4>预订人信息</h4>
        <form class="hotelPayInfoUserContent hotelPayInfoUserForm" method="post">
            <p class="cssFlex">
                *<label class="justify">姓名</label>
                <input type="text" name="guest[0].lastName" id="hotelPayUserFirst" style="margin-right: 5px;" placeholder="姓(拼音/英文) 如：zhang" />
                <input type="text" name="guest[0].firstName" id="hotelPayUserLast"  placeholder="名(拼音/英文) 如：san"/>

            </p>
            <p class="cssFlex">
                *<label class="justify">联系电话</label>
                <input type="text" name="contractPhone" id="userPhone" value=""onkeyup="value=value.replace(/[^\d]/g,'')" maxlength="11" placeholder="填写联系电话" />
                <img src="../images/icon/true.png" alt="" class="userPhoneTrue">
                <img src="../images/icon/del.png" alt="错误信息" class="del-userPhone">
                <span id="judgePhone"></span>
            </p>
            <p class="cssFlex">
                *<label class="justify">邮箱地址</label>
                <input type="text" name="contractEmail" id="userEmail" value="" placeholder="确认订单后将给你发邮箱通知" />
                <img src="../images/icon/true.png" alt="" class="userEmailTrue">
                <img src="../images/icon/del.png" alt="错误信息" class="del-userEmail">
                <span id="judgeEmail"></span>
            </p>
            <br />

        </form>
        <h4>入住人信息</h4>
        <form class="hotelPayInfoUserContent hotelPayInfoRoom " method="post">

        </form>

       <!-- <h4>取消规则</h4>
        <div class="hotelPayInfoUserContent">
            <p>超过时间<span>2018-07-03 23:59:00</span>将支付<span class="hotelPayOverPrice">525.51元</span></p>
            <p>如订单无法确认，房费全额退款</p>
        </div>
        <h4>温馨提示</h4>
        <div class="hotelPayInfoUserContent">
            <p>1.该酒店的入住时间为14:00，退房标准结算为12:00。如提前入住或推迟离店均须酌情加收一定的费用</p>
        </div>-->
        <a class="sucssBtn hotelPayBtn">
            <span data-tit="关闭 >">关闭</span>
        </a>
        <!--<a class="hotelPayBtn">立即支付</a>-->
    </div>
</div>
<script src="../js/common.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/ajax.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="../js/hotelOrderPayGoDetail.js" type="text/javascript" charset="utf-8"></script>-->
<script src="../js/project.js" type="text/javascript" charset="utf-8"></script>
<!--自定义滚动条插件-->
<script src="../js/scroll.js" type="text/javascript" charset="utf-8"></script>
<script>
    // 将存储的字符串转换成对象
    var allData = JSON.parse(localStorage.getItem("allData"));
    $(".hotelShowAllMapHotPrice").html("￥"+allData.price+"元")
    // 门票支付填写订单

    // var bandArray = [{bandId: 2,bandNum:allData.adult},{bandId:3,bandNum:allData.child},{bandId:4,bandNum:allData.baby},{bandId:5,bandNum:allData.yong},{bandId:6,bandNum:allData.Old}]

    // 离开页面进行刷新  清除缓存
    window.onbeforeunload=function (){
        if(event.clientX>document.body.clientWidth && event.clientY < 0 || event.altKey){
            localStorage.clear()
        }
    }

    $.ajax({
        url: orderRestControllerLook,
        type: "POST",
        dataType: "json",
        sync:true,
        data: {
            id : allData.orderId,
        },
        xhrFields: {
            withCredentials: true
        },
        traditional:true,
        success: function(data) {
            console.log(data)
            console.log(data.order.productTitle)
            $(".hotelPayInfoUserRoom").html(data.order.productTitle)    //产品名称
            $(".hotelPayInfoUserIn").html(data.order.checkIn)    //产品套餐
            $(".hotelPayInfoUserOut").html(data.order.checkOut)//出行日期
            // 出行人数
            $(".hotelPayHome").html(data.order.adultDesc)

            // 左部分内 容渲染
            $(".hotelPayInfoImgImg").attr("src",serverHttpUrlImg+data.order.thumbnailUrl)
            $(".headerSubCommonH4").html(data.order.productTitle)
            // $(".tickerOutCity").html(data.product.city)
            $(".tickerOutDate").html(timestampToTime(data.order.createDate))   ///出行日期
            // $(".tickerOutTime").html(data.product.duration)

            var theString = data.order.contractName;
            var arr = theString.split("/");

            $("#hotelPayUserFirst").val(arr[0])
            $("#hotelPayUserLast").val(arr[1])

            $("#userPhone").val(data.order.contractPhone)
            $("#userEmail").val(data.order.contractEmail)

            //酒店房型入住信息
            var hotelRoomHtml = ''
            for (var i=0;i<data.order.guest.length;i++){
                hotelRoomHtml += '<p class="justify" style="font-size: 18px;width: 70px;">房间'+(i+1)+'</p>'+
                    '<p class="cssFlex">\n' +
                    '\t\t\t\t\t\t<label class="justify">姓名</label>\n' +
                    '\t\t\t\t\t\t<input type="text" name="guest['+i+'].lastName" value="'+data.order.guest[i].lastName+'" style="margin-right: 5px;" placeholder="姓(拼音/英文) 如：zhang" />\n' +
                    '\t\t\t\t\t\t<input type="text" name="guest['+i+'].firstName" value="'+data.order.guest[i].firstName+'"   placeholder="名(拼音/英文) 如：san"/>\n' +
                    '\t\t\t\t\t\t<input type="hidden" name="contractName" class="contractName" value="" placeholder="名(拼音/英文) 如：san"/>\n' +
                    '\t\t\t\t\t</p>\n' +
                    '\t\t\t\t\t<p class="cssFlex">\n' +
                    '\t\t\t\t\t\t<label class="justify">年龄</label>\n' +
                    '\t\t\t\t\t\t<input type="text" name="guest['+i+'].orderId" value="'+data.order.guest[i].age+'" maxlength="2" placeholder="填写年龄" />\n' +
                    '\t\t\t\t\t</p>\n'+
                    '<br />'

            }

            $(".hotelPayInfoRoom").html(hotelRoomHtml)


        },
        error: function() {

        }
    });
</script>
</body>

</html>